(this.webpackJsonptoohak=this.webpackJsonptoohak||[]).push([[0],{69:function(e,a,t){e.exports=t(87)},87:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),o=t.n(c),l=t(13),i=t(14),s=t(16),u=t(15),m=t(27),d=t(17),p=t(10),h=t(19),v=t(38),g=t.n(v),y=(t(76),t(78),g.a.initializeApp({apiKey:"AIzaSyArVyBRB-XMiStAmjP5mCV2v2PmScbEpi8",authDomain:"integrity-step-capstone.firebaseapp.com",databaseURL:"https://integrity-step-capstone.firebaseio.com",projectId:"integrity-step-capstone",storageBucket:"integrity-step-capstone.appspot.com",messagingSenderId:"359578935158",appId:"1:359578935158:web:89d46122b0609b4a95a457",measurementId:"G-GMNRGZQ858"})),b=g.a.auth(),f=(g.a.firestore(),g.a.firestore());new g.a.auth.GoogleAuthProvider;var E=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={pagetype:"not-created",gameId:""},n.createGame=n.createGame.bind(Object(h.a)(n)),n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"createGame",value:function(){var e=function(){for(var e="",a=0;a<6;a++)e+="0123456789".charAt(Math.floor(10*Math.random()));return e}();this.setState({gameId:e});var a=f.collection("Rooms").doc(e);a.set({created:Date.now(),currentQuestion:0,phase:"created",gameId:e});a.collection("questions").doc("Test Q").set({}),a.collection("users").doc("Test user").set({});this.setState({pagetype:"created"})}},{key:"render",value:function(){var e=this;console.log("render called");var a=this.state,t=a.pagetype,n=a.gameId;return console.log(t),console.log(n),r.a.createElement("div",{className:"app-page create-page"},"not-created"===t&&r.a.createElement("button",{onclick:function(){return e.createGame()}}," Create Game! "),"created"===t&&r.a.createElement("div",null,r.a.createElement("span",null,"Created game PIN: ")," ",r.a.createElement("span",{className:"dynamic-text"},n),r.a.createElement(d.b,{to:"/host"},"Copy this ID and use it host the game")))}}]),t}(n.Component),j=t(34),G=t(116),k=t(117),O=t(118),I=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={},n}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"host-container"})}}]),t}(n.Component);var C=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChangeSelect=function(e){n.setState(Object(j.a)({},e.target.name,e.target.value))},n.handleChange=function(e){return function(a){n.setState(Object(j.a)({},e,a.target.value))}},n.state={game:{},gametype:"other",gameId:localStorage.getItem("RecentGameId")||"",password:"",isRedirected:Date.now()-localStorage.getItem("lastTimestamp")<2e3},n.updateGame=n.updateGame.bind(Object(h.a)(n)),n.initGameListener=n.initGameListener.bind(Object(h.a)(n)),n.restartGame=n.restartGame.bind(Object(h.a)(n)),n.quitGame=n.quitGame.bind(Object(h.a)(n)),n.endGame=n.endGame.bind(Object(h.a)(n)),n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.state.gameId}},{key:"updateGame",value:function(e){this.state.game;y.database().ref("Rooms/${game.key}").update(e)}},{key:"restartGame",value:function(){var e={players:[],phase:"setup"};this.updateGame(e)}},{key:"quitGame",value:function(){this.props.toggleHeader;this.updateGame({phase:null})}},{key:"endGame",value:function(){this.updateGame({phase:"final_result"})}},{key:"joinGame",value:function(e){var a=this.state,t=a.password,n=(a.gametype,this);!function(e,a){y.database().ref("/Rooms").orderByChild("gameId").equalTo(e).once("value",a)}(e,(function(e){var a;e.val()&&(e.forEach((function(e){a=e.val()})),a.password===t&&n.initGameListener(a))}))}},{key:"initGameListener",value:function(e){var a;a=y.database().ref("Rooms/$(gameParameter.key}");var t=this;a.on("value",(function(e){var a=e.val();a.phase||(a.phase="setup"),a?t.setState({game:a}):t.setState({game:""})}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.game,n=a.gameId,c=a.password,o=(a.isRedirected,a.gametype,{update:this.updateGame,restart:this.restartGame,end:this.endGame,quit:this.quitGame});return t.phase?r.a.createElement("div",{className:"page-container host-page"},"quiz"===t.gametype&&r.a.createElement(I,{game:t,gameFunc:o})):r.a.createElement("div",{className:"page-container host-page"},r.a.createElement(O.a,null,r.a.createElement(G.a,{label:"Game PIN",name:"Game ID",value:n,onChange:this.handleChange("gameId")})),r.a.createElement(O.a,null,r.a.createElement(G.a,{label:"Password",type:"password",name:"password",value:c,onChange:this.handleChange("password")})),r.a.createElement(k.a,{onClick:function(){return e.joinGame(n)},variant:"contained"},"Host"))}}]),t}(n.Component),S=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={},n.saveAnswer=n.saveAnswer.bind(Object(h.a)(n)),n}return Object(i.a)(t,[{key:"saveAnswer",value:function(e){var a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id;y.database().ref("/Rooms/"+this.props.game.key+"/players/"+this.props.playerKey+"/answers/"+a).set(e,(function(e){}))}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component);t(40);function w(e,a){y.database().ref("/Rooms").orderByChild("gameId").equalTo(e).once("value",a)}var P=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChangeSelect=function(e){n.setState(Object(j.a)({},e.target.name,e.target.value))},n.handleChange=function(e){return function(a){n.setState(Object(j.a)({},e,a.target.value))}},n.state={game:{},gameId:"",gametype:"other",recentGameId:localStorage.getItem("RecentGameIdPlay")||"",playerKey:"",chartURLs:null,technicalIndicators:null,currentCash:null,currentShares:null,currentPrice:null},n.createPlayer=n.createPlayer.bind(Object(h.a)(n)),n.joinGame=n.joinGame.bind(Object(h.a)(n)),n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.recentGameId;e&&w("default",e)}},{key:"updateShares",value:function(e,a){}},{key:"joinGame",value:function(e){var a=this.state.gametype;w(a,e)}},{key:"initGameListener",value:function(e){var a;a=y.database().ref("/Rooms/$(gameParameter.key)");var t=this;a.on("value",(function(e){var a=e.val();a?t.setState({game:a}):t.setState({game:""})}))}},{key:"createPlayer",value:function(e){var a;this.state.game;a=y.database().ref("/Rooms/$(game.key}/players").push();var t=Object.assign({key:a.key},e),n=this;a.set(t,(function(e){e||(n.setState({playerKey:t.key}),localStorage.setItem("RecentPlayerKey",t.key))}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.game,n=a.playerKey,c=a.gameId;a.recentGameId,a.recentGame,a.isRedirected,a.gametype;return t.phase?r.a.createElement("div",{className:"page-container play-page"},"quiz"===t.gametype&&r.a.createElement(S,{game:t,createPlayer:this.createPlayer,playerKey:n})):r.a.createElement("div",{className:"page-container play-page"},r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(G.a,{label:"Game PIN",name:"Game ID",value:c,onChange:this.handleChange("gameId")})),r.a.createElement(k.a,{onClick:function(){return e.joinGame(c)},variant:"contained"},"Join")))}}]),t}(n.Component),R=Object(n.createContext)({user:null}),N=(n.Component,function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={},n}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(m.a,null,r.a.createElement("title",null," toohak stonks quizzes ")),r.a.createElement("div",{id:"home"},r.a.createElement("section",null,r.a.createElement("div",null),r.a.createElement("h1",null,"toohak app"),r.a.createElement("div",{className:"play-button-container"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.b,{to:"/play"},"Play")))),r.a.createElement("div",{className:"host-button-container"},r.a.createElement("p",null,r.a.createElement(d.b,{to:"/host"},"Host a room"))),r.a.createElement("div",{className:"create-button-container"},r.a.createElement("p",null,r.a.createElement(d.b,{to:"/create"},"Create a room"))),r.a.createElement("div",{className:"auth-container"},r.a.createElement(d.b,{to:"/auth/signIn"},"Login"),r.a.createElement(d.b,{to:"/auth/signUp"},"Signup")))))}}]),t}(n.Component));t(43);var q=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={},n}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"content"},r.a.createElement(p.a,{exact:!0,path:"/play",render:function(){return r.a.createElement(P,null)}}),r.a.createElement(p.a,{exact:!0,path:"/host",render:function(){return r.a.createElement(C,null)}}),r.a.createElement(p.a,{exact:!0,path:"/create",render:function(){return r.a.createElement(E,null)}}),r.a.createElement(p.a,{exact:!0,path:"/",render:function(){return r.a.createElement(N,null)}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[69,1,2]]]);
//# sourceMappingURL=main.c5a5d293.chunk.js.map