{"version":3,"sources":["firebase.js","Components/firebase-access.jsx","Components/pages/Create.jsx","Components/pages/Host.jsx","Components/quiz/host/Quiz.js","Components/pages/Play.jsx","Components/quiz/play/Quiz.jsx","Components/authenticate/providers/UserProvider.jsx","Components/pages/Home.jsx","App.jsx","serviceWorker.js","index.js"],"names":["fire","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","firestore","debug","GoogleAuthProvider","str","console","log","getNumDays","roomID","a","getRoomData","roomData","dates","length","getStartingMoney","starting_money","addUser","nickname","numDays","getSymbols","numSymbols","getRoomRef","roomRef","collection","doc","userRef","userID","id","empArray","Array","from","gameInfo","userId","net_worth","money_left","curShares","set","i_day","toString","change","setUpRoom","NumOfSymbols","Rounds","password","startingMoney","day_index","phase","initSymbols","then","symbolsL","initDates","datesD","update","symbols","initializeQuiz","where","get","Stocks","IPOyearMax","today","Date","year","getFullYear","forEach","Stock","data","IPOyear","yearDiff","maximum_period","Math","floor","random_period","random","startDate","endDate","start","end","rand_startDate","curr_date","i","push","toISOString","substring","setMonth","getMonth","Industry","Sector","formData","FormData","append","fetch","method","mode","body","response","json","symbolJson","hasOwnProperty","IndustryInfo","numOfIndustries","cutoff","orderBy","limit","Symbol","SectorInfo","numOfSectors","StockInfo","numOfStocks","NumOfStocks","roomId","periodLen","endDates","JSON","stringify","Create","props","state","pagetype","gameId","createGameWrapper","bind","_gameId","this","setState","className","onClick","to","Component","Host","handleChangeSelect","event","target","name","value","handleChange","questionNum","authenticated","listening","users","userExists","updateUsers","joinGame","updatePhase","initGameListener","restartGame","quitGame","endGame","item","gameupdate","toggleHeader","updateGame","that","snapshot","docs","user","userData","concat","onSnapshot","date_index","FormControl","TextField","label","onChange","type","Button","variant","map","startGame","key","advanceQuestion","Play","chartURLs","technicalIndicatorUrls","cash","prices","gameDoc","gameData","curQuestionNum","curPhase","exists","uniqueUserId","game","playerKey","recentGameId","recentGame","isRedirected","gametype","UserContext","createContext","Home","Helmet","App","exact","path","render","Boolean","window","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"yRAeMA,G,YAAOC,IAASC,cAXC,CACrBC,OAAQ,0CACRC,WAAY,0CACZC,YAAa,iDACbC,UAAW,0BACXC,cAAe,sCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,kBAKXC,EAAOV,IAASU,OAEhBC,GADYX,IAASY,YAChBZ,IAASY,aCddC,GDiBW,IAAIb,IAASU,KAAKI,mBCjBrB,SAACC,GACXC,QAAQC,IAAIF,KAGHG,EAAU,uCAAG,WAAOC,GAAP,eAAAC,EAAA,sEACCC,EAAYF,GADb,cAChBG,EADgB,yBAEfA,EAASC,MAAMC,QAFA,2CAAH,sDAKVC,EAAgB,uCAAG,WAAON,GAAP,eAAAC,EAAA,sEACLC,EAAYF,GADP,cACtBG,EADsB,yBAErBA,EAASI,gBAFY,2CAAH,sDAKhBC,EAAO,uCAAG,WAAOR,EAAOS,GAAd,+BAAAR,EAAA,6DACnBP,EAAM,gCADa,SAEGK,EAAWC,GAFd,cAEbU,EAFa,OAGnBhB,EAAM,gCAHa,SAIOiB,EAAWX,GAJlB,cAIbY,EAJa,OAI2BP,OAC9CX,EAAM,gCALa,UAMGmB,EAAWb,GANd,eAMbc,EANa,OAOnBpB,EAAM,gCAPa,UAQGoB,EAAQC,WAAW,SAASC,MAR/B,eAQbC,EARa,OASnBvB,EAAM,gCACAwB,EAASD,EAAQE,GACjBC,EAAWC,MAAMC,KAAKD,MAAMT,IAAY,kBAAI,KAClDlB,EAAM,gCAZa,UAaUY,EAAiBN,GAb3B,QAabO,EAba,OAgBbgB,EAAW,CACbC,OAAQN,EACRT,SAAUA,EACVgB,UAAWlB,EACXmB,WAAYnB,EACZoB,UAAWP,GAGf1B,EAAM,gCACNuB,EAAQW,IAAIL,GACJM,EAAQ,EA1BG,aA0BAA,EAAQnB,GA1BR,kCA2BTO,EAAQF,WAAW,eAAeC,IAAIc,SAASD,IAAQD,IAAI,CAC7DG,OAAQX,IA5BG,QA0BiBS,IA1BjB,+BA+BnBnC,EAAM,gCA/Ba,kBAiCZwB,GAjCY,4CAAH,wDAoCPc,EAAY,SAACC,EAAaC,EAAOhB,EAAOiB,GAAoC,IAA3BC,EAA0B,uDAAV,IACpEtB,EAAUtB,EAAGuB,WAAW,SAASC,MACvCF,EAAQc,IAAI,CACRS,UAAW,EACXC,MAAO,UACPH,SAAUA,EACV5B,eAAgB6B,IAEpB,IAAMpC,EAASc,EAAQK,GAWvB,OAVAoB,EAAY,KAAK,KAAKN,GAAcO,MAAK,SAACC,GACtCC,EAAUD,EAASP,GAAQM,MAAK,SAACG,GAC7B7B,EAAQ8B,OAAO,CACXC,QAASJ,EACTrC,MAAOuC,EAAM,QAEjBG,EAAeL,EAASzC,EAAO2C,EAAM,OAAWA,EAAM,aAIvD3C,GA2BJ,IAAM0C,EAAS,uCAAG,WAAOG,EAASX,GAAhB,yCAAAjC,EAAA,sEACHT,EAAGuB,WAAW,eAAeC,IAAI,SAASD,WAAW,UAClEgC,MAAM,SAAS,KAAKF,GAASG,MAFb,OAsBrB,IArBIC,EADiB,OAGjBC,EAAa,EACbC,EAAQ,IAAIC,KACZC,EAAOF,EAAMG,cACjBL,EAAOM,SAAQ,SAASC,GAChBN,EAAaM,EAAMC,OAAOC,UAC1BR,EAAaM,EAAMC,OAAOC,YAKZ,EAClBC,EAAWN,GAAQH,EAAW,GAC9BU,EAAiBC,KAAKC,OAAmB,GAAXH,EAFZ,GAEiDzB,GACnE6B,EAAiBF,KAAKC,MAAOD,KAAKG,UAAaJ,EAH7B,MAIlBK,EAAY,IAAIb,KAAKF,EAAW,EAAE,EAAE,GACpCgB,EAAW,IAAId,KAAKF,EAAW,EAAE,EAAEa,EAAc,GAxBrCI,EAyBiBF,EAzBVG,EAyBoBF,EAAvCG,EAxBO,IAAIjB,MAAMe,EAAQN,KAAKG,UAAYI,EAAMD,IAyBhD/D,EAAQ,GACRkE,EAAYD,EACRE,EAAI,EAAGA,EAAIrC,EAAQqC,IACvBnE,EAAMoE,KAAKF,EAAUG,cAAcC,UAAU,EAAG,KAChDJ,EAAY,IAAIlB,KAAKkB,EAAUK,SAASL,EAAUM,WAAWb,IAxB5C,OA0BfpB,EAAQ,CACV,MAAUvC,EACV,OAAU2D,GA5BO,kBA8BdpB,GA9Bc,kCANzB,IAAoBwB,EAAOC,IAMF,OAAH,wDAiCT7B,EAAW,uCAAG,WAAMsC,EAASC,EAAO7C,GAAtB,uCAAAhC,EAAA,yDACnB4C,EAAU,GACA,OAAXiC,GAAgC,OAAbD,EAFC,wBAIfE,EAAW,IAAIC,UACVC,OAAO,WAAWJ,GAC3BE,EAASE,OAAO,SAASH,GACzBC,EAASE,OAAO,eAAehD,GAPZ,kBASMiD,MAAM,oCAAqC,CAC5DC,OAAQ,OACRC,KAAM,OACNC,KAAMN,IAZK,cASXO,EATW,iBAcQA,EAASC,OAdjB,aAcXC,EAdW,QAeAC,eAAe,SAff,wBAgBX5F,QAAQC,IAAI,6BAhBD,kBAiBJ+C,GAjBI,QAmBfA,EAAU2C,EAAU,QAnBL,kDAsBf3F,QAAQC,IAAI,2BAtBG,mCA0BF,OAAb+E,EA1Be,kCA4BOrF,EAAGuB,WAAW,eAAeC,IAAI,YAAYgC,MA5BpD,eA4Bf0C,EA5Be,OA6BfC,EAAiBD,EAAajC,OAAOoB,SAASA,GAC9Ce,EAAS/B,KAAKC,MAAOD,KAAKG,UAAa2B,EAAkB1D,GAAeA,GA9BzD,UA+BIzC,EAAGuB,WAAW,eAAeC,IAAI,SAASD,WAAW,UACvEgC,MAAM,WAAW,KAAK8B,GACtB9B,MAAM,cAAc,KAAM6C,GAC1BC,QAAQ,eAAeC,MAAM7D,GAAce,MAlC7B,eAmCRO,SAAQ,SAASvC,GACxB6B,EAAQ2B,KAAKxD,EAAIyC,OAAOsC,WApCT,2BAwCJ,OAAXjB,EAxCe,kCA0CKtF,EAAGuB,WAAW,eAAeC,IAAI,UAAUgC,MA1ChD,eA0CfgD,EA1Ce,OA2CfC,EAAcD,EAAWvC,OAAOqB,OAAOA,GACvCc,EAAS/B,KAAKC,MAAOD,KAAKG,UAAaiC,EAAehE,GAAeA,GA5CtD,UA6CCzC,EAAGuB,WAAW,eAAeC,IAAI,SAASD,WAAW,UACpEgC,MAAM,SAAS,KAAK+B,GACpB/B,MAAM,YAAY,KAAM6C,GACxBC,QAAQ,aAAaC,MAAM7D,GAAce,MAhD3B,eAiDXO,SAAQ,SAASvC,GACrB6B,EAAQ2B,KAAKxD,EAAIyC,OAAOsC,WAlDT,yCAwDIvG,EAAGuB,WAAW,eAAeC,IAAI,SAASgC,MAxD9C,eAwDfkD,EAxDe,OAyDfC,EAAcD,EAAUzC,OAAO2C,YAAc,EAC7CR,EAAS/B,KAAKC,MAAOD,KAAKG,UAAamC,EAAclE,GAAeA,GA1DrD,UA2DAzC,EAAGuB,WAAW,eAAeC,IAAI,SAASD,WAAW,UACnEgC,MAAM,YAAY,KAAM6C,GACxBC,QAAQ,aAAaC,MAAM7D,GAAce,MA7D3B,eA8DZO,SAAQ,SAASC,GACpBX,EAAQ2B,KAAKhB,EAAMC,OAAOsC,WA/DX,iCAmEhBlD,GAnEgB,0DAAH,0DAsEXC,EAAc,uCAAG,WAAOD,EAASwD,EAAQC,EAAWC,GAAnC,eAAAtG,EAAA,6DACtB8E,EAAW,IAAIC,UACVC,OAAO,SAASuB,KAAKC,UAAU5D,IACxCkC,EAASE,OAAO,SAASoB,GACzBtB,EAASE,OAAO,WAAWuB,KAAKC,UAAUF,IAJhB,kBAMhBrB,MAAM,mCAAoC,CAC5CC,OAAQ,OACRC,KAAM,OACNC,KAAMN,IATY,uDAatBlF,QAAQC,IAAI,kBAbU,eAe1BiF,EAASE,OAAO,YAAYqB,GAfF,oBAiBhBpB,MAAM,wCAAyC,CACjDC,OAAQ,OACRC,KAAM,OACNC,KAAMN,IApBY,2DAwBtBlF,QAAQC,IAAI,kBAxBU,iEAAH,4DA4Bda,EAAU,uCAAG,WAAOX,GAAP,eAAAC,EAAA,sEACCC,EAAYF,GADb,cAChBG,EADgB,yBAEfA,EAAS0C,SAFM,2CAAH,sDAmHV3C,EAAW,uCAAG,WAAOF,GAAP,eAAAC,EAAA,sEAEjBT,EAAGuB,WAAW,SAASC,IAAIhB,GAAQgD,MAAMR,MAAK,SAACxB,GACjDb,EAAWa,EAAIyC,UAHI,gCAKhBtD,GALgB,2CAAH,sDAQXU,EAAa,SAACb,GACvB,OAAOR,EAAGuB,WAAW,SAASC,IAAIhB,I,IC7QvB0G,E,kDAxEX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTC,SAAU,cACVC,OAAQ,IAEZ,EAAKC,kBAAoB,EAAKA,kBAAkBC,KAAvB,gBANV,E,6OAuCKhF,EAAU,EAAE,EAAE,KAAK,I,OAAnCiF,E,OACJC,KAAKC,SAAS,CACVN,SAAU,UACVC,OAAQG,I,qIAIN,IAAD,OACLpH,QAAQC,IAAI,iBADP,MAEqBoH,KAAKN,MAAxBC,EAFF,EAEEA,SAASC,EAFX,EAEWA,OAGhB,OAFAjH,QAAQC,IAAI+G,GACZhH,QAAQC,IAAIgH,GAGR,yBAAKM,UAAU,wBACG,gBAAbP,GACG,4BAAQQ,QAAO,sBAAE,sBAAApH,EAAA,sEAAkB,EAAK8G,oBAAvB,oFAAjB,kBAGU,YAAbF,GACG,6BACI,oDACC,IACD,0BAAMO,UAAU,gBAAgBN,GAC/B,IACD,kBAAC,IAAD,CAAMQ,GAAG,SAAT,+C,GAjEHC,a,mCCsQNC,GClRID,Y,kDD6Bf,WAAYZ,GAAQ,IAAD,8BACf,cAAMA,IAgCVc,mBAAqB,SAACC,GAClB,EAAKP,SAAL,eAAgBO,EAAMC,OAAOC,KAAMF,EAAMC,OAAOE,SAlCjC,EAqCnBC,aAAe,SAAAF,GAAI,OAAI,SAACF,GACpB,EAAKP,SAAL,eACKS,EAAMF,EAAMC,OAAOE,UArCxB,EAAKjB,MAAQ,CACTtE,MAAO,aACPyF,YAAa,EACb1B,OAAQ,KACRlE,SAAU,GACV6F,cAAe,KACfC,UAAW,KACXC,MAAO,IAEX,EAAKC,WAAa,EAAKA,WAAWnB,KAAhB,gBAClB,EAAKoB,YAAc,EAAKA,YAAYpB,KAAjB,gBACnB,EAAKqB,SAAW,EAAKA,SAASrB,KAAd,gBAChB,EAAKsB,YAAc,EAAKA,YAAYtB,KAAjB,gBACnB,EAAKuB,iBAAmB,EAAKA,iBAAiBvB,KAAtB,gBACxB,EAAKwB,YAAc,EAAKA,YAAYxB,KAAjB,gBACnB,EAAKyB,SAAW,EAAKA,SAASzB,KAAd,gBAChB,EAAK0B,QAAU,EAAKA,QAAQ1B,KAAb,gBACf,EAAKtH,MAAQ,EAAKA,MAAMsH,KAAX,gBAnBE,E,kDAsBbpH,GACFC,QAAQC,IAAIF,K,0CAIKsH,KAAKN,MAAfP,S,+EAgBA7E,GAAS,IACT0G,EAAShB,KAAKN,MAAdsB,MAaP,OAZArI,QAAQC,IAAI,yBAA2BoI,GACvC7G,MAAMC,KAAK4G,GAAO3E,SAAQ,SAASoF,GAI/B,GAHA9I,QAAQC,IAAI,WAAa6I,EAAKnH,QAC9B3B,QAAQC,IAAI,mBAAqB0B,GAE7BmH,EAAKnH,QAAUA,EAEf,OADA3B,QAAQC,IAAI,mBACL,EAEPD,QAAQC,IAAI6I,EAAKnH,OAAS,QAAUA,EAAS,sBAG9C,I,kCAGCoH,GAAa,IACdvC,EAAUa,KAAKN,MAAfP,OACPa,KAAKC,SAAS,CACV7E,MAAOsG,IAEXpJ,EAAGuB,WAAW,SAASC,IAAIqF,GAAQzD,OAAO,CACtCN,MAAOsG,M,wEASY1B,KAAKP,MAArBkC,aACP3B,KAAK4B,WAAW,CAACxG,MAAM,S,gCAIvB4E,KAAK4B,WAAW,CAACxG,MAAM,mB,oCAmBZ,IAAD,EACgB4E,KAAKN,MAAfP,GADN,EACHlE,SADG,EACMkE,QACV0C,EAAO7B,KACC1H,EAAGuB,WAAW,SAASC,IAAIqF,GACjCtF,WAAW,SAASiC,MAAMR,MAAK,SAACwG,GACpCA,EAASC,KAAK1F,SAAQ,SAAA2F,GAClB,IAAIC,EAAWD,EAAKzF,OACfsF,EAAKZ,WAAWgB,EAAS3H,UAC1B3B,QAAQC,IAAI,mBACZD,QAAQC,IAAI,cAAgBqJ,EAAS3H,QACrCuH,EAAK5B,SAAS,CACVe,MAAOa,EAAKnC,MAAMsB,MAAMkB,OAAO,CAACD,e,oKAQtBjC,KAAKN,MAAxBzE,E,EAAAA,SAASkE,E,EAAAA,OACV0C,EAAO7B,KACTpG,EAAUD,EAAWwF,G,SACJnG,EAAYmG,G,UACjB,OADZlG,E,4BAEAN,QAAQC,IAAIK,GACRA,EAASgC,WAAaA,GAA+B,YAAnBhC,EAASmC,M,wBAC3CyG,EAAK5B,SAAS,CACVa,cAAe,MACf1F,MAAO,eAEXyG,EAAKrJ,MAAM,kB,UACLc,EAAQ6F,EAAO,c,eACrB0C,EAAKrJ,MAAM,kB,UACLqJ,EAAKX,c,eACXW,EAAKrJ,MAAM,kB,UACLqJ,EAAKR,mB,QACXQ,EAAKrJ,MAAM,kBACXoB,EAAQ8B,OAAO,CACXN,MAAO,e,wBAGXzC,QAAQC,IAAI,kB,gCAGhBD,QAAQC,IAAI,QAAUuG,EAAS,mB,gJAInB,IACTA,EAAUa,KAAKN,MAAfP,OACHvF,EAAUtB,EAAGuB,WAAW,SAASC,IAAIqF,GACnC0C,EAAO7B,KAEbpG,EAAQC,WAAW,SAASsI,YAAW,SAASlJ,GAC5C4I,EAAKX,mB,kCAKIlB,KACRoB,YAAY,c,wCAGF,IACRjC,EAAUa,KAAKN,MAAfP,OAEPa,KAAKC,SAAS,CACVY,YAFSb,KAESN,MAAMmB,YAAc,IAE1CvI,EAAGuB,WAAW,SAASC,IAAIqF,GAAQzD,OAAO,CACtC0G,WALSpC,KAKQN,MAAMmB,gB,+BAarB,IAAD,SACgEb,KAAKN,MAAnEP,EADF,EACEA,OAAQlE,EADV,EACUA,SAAUG,EADpB,EACoBA,MAAO0F,EAD3B,EAC2BA,cAAeE,EAD1C,EAC0CA,MAAOH,EADjD,EACiDA,YAE1Cb,KAAK4B,WACJ5B,KAAKsB,YACTtB,KAAKwB,QACJxB,KAAKuB,SAGf,GAAsB,OAAlBT,EACA,OACI,yBAAKZ,UAAU,4BACX,kBAACmC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,WAAW7B,KAAK,UAAUC,MAAOxB,EACvCqD,SAAUxC,KAAKY,aAAa,aAE3C,kBAACyB,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,WAAWE,KAAK,WAAW/B,KAAK,WAAWC,MAAO1F,EACxDuH,SAAUxC,KAAKY,aAAa,eAE3C,kBAAC8B,EAAA,EAAD,CAAQvC,QAAS,kBAAM,EAAKgB,YAAYwB,QAAQ,aAAhD,SAGL,GAAsB,QAAlB7B,EAAyB,CAChC,GAAc,eAAV1F,EACA,OACI,yBAAK8E,UAAU,4BACX,2CACA,wBAAIjG,GAAG,aACF+G,EAAM4B,KAAI,SAAAZ,GAAI,OACX,4BAAMA,EAAKzI,cAInB,4BAAQ4G,QAAS,kBAAM,EAAK0C,cAA5B,sBAGL,GAAc,aAAVzH,EACP,OACI,yBAAK8E,UAAU,4BACX,oDACC,IACD,0BAAMA,UAAU,gBAAgBW,GAChC,2CACA,wBAAI5G,GAAG,aACF+G,EAAM4B,KAAI,SAAAZ,GAAI,OACX,wBAAIc,IAAKd,EAAK/H,IAAK+H,EAAKzI,cAIhC,4BAAQ4G,QAAS,kBAAM,EAAK4C,oBAA5B,uB,GA1OL1C,cEiJJ2C,GC1KI3C,Y,wDDmBf,WAAaZ,GAAQ,IAAD,8BAChB,cAAMA,IA+BVc,mBAAqB,SAACC,GAClB,EAAKP,SAAL,eAAiBO,EAAMC,OAAOC,KAAOF,EAAMC,OAAOE,SAjClC,EAoCpBC,aAAe,SAAAF,GAAI,OAAI,SAACF,GACpB,EAAKP,SAAL,eACKS,EAAOF,EAAMC,OAAOE,UApCzB,EAAKjB,MAAQ,CAETE,OAAQ,KACR3E,SAAU,GACVX,OAAQ,GACRf,SAAU,GAGV6B,MAAO,aACPyF,YAAa,EACboC,UAAW,GACXC,uBAAwB,GACxB3I,UAAW,EACX4I,KAAM,GACN1I,UAAW,GACX2I,OAAQ,IAEZ,EAAK9J,QAAU,EAAKA,QAAQwG,KAAb,gBACf,EAAKqB,SAAW,EAAKA,SAASrB,KAAd,gBAChB,EAAKuB,iBAAmB,EAAKA,iBAAiBvB,KAAtB,gBACxB,EAAKtH,MAAQ,EAAKA,MAAMsH,KAAX,gBAtBG,E,kDAyBdpH,GACFC,QAAQC,IAAIF,K,sFA2BZ,IAAMmJ,EAAO7B,KADE,EAE6BA,KAAKN,MAA1CmB,EAFQ,EAERA,YAAYjB,EAFJ,EAEIA,OAAOxE,EAFX,EAEWA,MAFX,EAEiB7B,SAChBjB,EAAGuB,WAAW,SAASC,IAAI8F,GACnCuC,YAAW,SAASkB,GACxB,IAAMC,EAAWD,EAAQ9G,OACnBgH,EAAiBD,EAASnI,UAC1BqI,EAAWF,EAASlI,MAC1BzC,QAAQC,IAAI0K,GACRzC,GAAe0C,GACf1B,EAAK5B,SAAS,CACVY,YAAa0C,EAAiB,IAIlCnI,IAAUoI,GACV3B,EAAK5B,SAAS,CACV7E,MAAOoI,S,iCAOX,IAAD,EAC4BxD,KAAKN,MAAjCE,EADA,EACAA,OAAO3E,EADP,EACOA,SAAS1B,EADhB,EACgBA,SACjBsI,EAAO7B,KACG1H,EAAGuB,WAAW,SAASC,IAAI8F,GACnC9D,MAAMR,MAAK,SAASgI,GACxB,GAAIA,EAASG,OAAQ,CACjB,IAAIpJ,EAAWiJ,EAAS/G,OACxB,GAAIlC,EAASY,WAAaA,GAA+B,eAAnBZ,EAASe,MAAwB,CACnE,IAAIsI,EAAe7B,EAAKvI,QAAQC,EAASc,EAAShB,gBAClDwI,EAAK5B,SAAS,CACV7E,MAAO,aACPd,OAAQoJ,EACRnJ,UAAWF,EAAShB,eACpB8J,KAAM9I,EAAShB,iBAEnBwI,EAAKR,wBAEEhH,EAASY,WAAaA,EAC7BtC,QAAQC,IAAI,6BACc,eAAnByB,EAASe,MAChBzC,QAAQC,IAAI,sBAEZD,QAAQC,IAAI,4BAGhBD,QAAQC,IAAI,QAAUgH,EAAS,wB,+BAKhC,IAAD,SAC4GI,KAAKN,MAA3GtE,GADN,EACCuI,KADD,EACMvI,OAAMH,EADZ,EACYA,SAAS1B,EADrB,EACqBA,SAAmBsH,GADxC,EAC8B+C,UAD9B,EACwC/C,aAAYjB,EADpD,EACoDA,OADpD,EAC2DiE,aAD3D,EACwEC,WADxE,EACmFC,aADnF,EACgGC,SAEtG,OADArL,QAAQC,IAAIiI,GACE,eAAVzF,EAEI,yBAAK8E,UAAU,4BACX,6BACI,kBAACmC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,WAAW7B,KAAK,WAAWC,MAAOpH,EACxCiJ,SAAUxC,KAAKY,aAAa,eAE3C,kBAACyB,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,WAAW7B,KAAK,UAAUC,MAAOf,EAAQ4C,SAAUxC,KAAKY,aAAa,aAE1F,kBAACyB,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,WAAWE,KAAK,WAAW/B,KAAK,WAAWC,MAAO1F,EACxDuH,SAAUxC,KAAKY,aAAa,eAE3C,kBAAC8B,EAAA,EAAD,CAAQvC,QAAS,kBAAM,EAAKgB,YAAYwB,QAAQ,aAAhD,UAIK,eAAVvH,EAEH,6BACI,gFAGS,aAAVA,EAEH,6BACI,oDACC,IACD,0BAAM8E,UAAU,gBAAgBW,GAChC,uEACA,yCACA,0CACA,gDATL,M,GAlJIR,cERN4D,EAAcC,wBAAc,CAAElC,KAAM,OCyClCmC,GDxCY9D,Y,kDCMvB,WAAYZ,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAM,GAFI,E,qDAKf,OACI,kBAAC,WAAD,KACI,kBAAC0E,EAAA,EAAD,KAAQ,2DACR,yBAAKnK,GAAG,QACJ,iCACI,8BACA,0CACA,yBAAKiG,UAAU,yBACX,4BACI,4BAAI,kBAAC,IAAD,CAAME,GAAG,SAAT,WAGZ,yBAAKF,UAAU,yBACX,2BAAG,kBAAC,IAAD,CAAME,GAAG,SAAT,iBAEP,yBAAKF,UAAU,2BACX,2BAAG,kBAAC,IAAD,CAAME,GAAG,WAAT,mBAEP,yBAAKF,UAAU,kBACX,kBAAC,IAAD,CAAME,GAAG,gBAAT,SACA,kBAAC,IAAD,CAAMA,GAAG,gBAAT,kB,GA1BTC,cCsBJgE,E,kDApBb,WAAY5E,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GAFM,E,qDAKjB,OACE,kBAAC,IAAD,KACE,yBAAKQ,UAAU,OACb,yBAAKjG,GAAG,WACN,kBAAC,IAAD,CAAOqK,OAAK,EAACC,KAAK,QAAQC,OAAQ,kBAAM,kBAAC,EAAD,SACxC,kBAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,QAAQC,OAAQ,kBAAM,kBAAC,EAAD,SACxC,kBAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,UAAUC,OAAQ,kBAAM,kBAAC,EAAD,SAC1C,kBAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,IAAIC,OAAQ,kBAAM,kBAAC,EAAD,gB,GAb9BnE,aCEEoE,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCbNC,IAASN,OACP,kBAAC,IAAMO,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,SD0HpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB9J,MAAK,SAAA+J,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACL7M,QAAQ6M,MAAMA,EAAMC,c","file":"static/js/main.6a2222d3.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyArVyBRB-XMiStAmjP5mCV2v2PmScbEpi8\",\r\n  authDomain: \"integrity-step-capstone.firebaseapp.com\",\r\n  databaseURL: \"https://integrity-step-capstone.firebaseio.com\",\r\n  projectId: \"integrity-step-capstone\",\r\n  storageBucket: \"integrity-step-capstone.appspot.com\",\r\n  messagingSenderId: \"359578935158\",\r\n  appId: \"1:359578935158:web:89d46122b0609b4a95a457\",\r\n  measurementId: \"G-GMNRGZQ858\"\r\n};\r\n\r\nconst fire = firebase.initializeApp(firebaseConfig);\r\n\r\nconst auth = firebase.auth();\r\nconst firestore = firebase.firestore();\r\nconst db = firebase.firestore();\r\n\r\n\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nconst signInWithGoogle = () => {\r\n  auth.signInWithPopup(provider);\r\n};\r\n\r\nexport {db, fire, auth, firestore, signInWithGoogle};\r\n\r\nexport const getUserID = () =>{\r\n  var user = firebase.auth().currentUser;\r\n  if (user != null) {\r\n    return user.uid;\r\n  } else {\r\n    throw \"Null User\"\r\n  }\r\n};\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport {db} from \"../firebase\";\r\n\r\nconst debug = (str) => {\r\n    console.log(str);\r\n}\r\n\r\nexport const getNumDays = async (roomID) => {\r\n    const roomData = await getRoomData(roomID);\r\n    return roomData.dates.length;\r\n}\r\n\r\nexport const getStartingMoney = async (roomID) => {\r\n    const roomData = await getRoomData(roomID);\r\n    return roomData.starting_money;\r\n}\r\n\r\nexport const addUser = async (roomID,nickname) => {\r\n    debug(\"checkpoint 1 firebase-access\");\r\n    const numDays = await getNumDays(roomID);\r\n    debug(\"checkpoint 2 firebase-access\");\r\n    const numSymbols = (await getSymbols(roomID)).length;\r\n    debug(\"checkpoint 3 firebase-access\");\r\n    const roomRef = await getRoomRef(roomID);\r\n    debug(\"checkpoint 4 firebase-access\");\r\n    const userRef = await roomRef.collection('users').doc();\r\n    debug(\"checkpoint 5 firebase-access\");\r\n    const userID = userRef.id;\r\n    const empArray = Array.from(Array(numSymbols),()=>0);\r\n    debug(\"checkpoint 6 firebase-access\");\r\n    const starting_money = await getStartingMoney(roomID);\r\n\r\n\r\n    const gameInfo = {\r\n        userId: userID,\r\n        nickname: nickname,\r\n        net_worth: starting_money,\r\n        money_left: starting_money,\r\n        curShares: empArray,\r\n    }\r\n\r\n    debug(\"checkpoint 7 firebase-access\");\r\n    userRef.set(gameInfo);\r\n    for(var i_day = 0; i_day < numDays; i_day++) {\r\n        await userRef.collection('investments').doc(toString(i_day)).set({\r\n            change: empArray,\r\n        });\r\n    }\r\n    debug(\"checkpoint 8 firebase-access\");\r\n\r\n    return userID;\r\n}\r\n\r\nexport const setUpRoom = (NumOfSymbols,Rounds,userID,password,startingMoney = 10000) => {\r\n    const roomRef = db.collection('Rooms').doc();\r\n    roomRef.set({\r\n        day_index: 0,\r\n        phase: 'no-host',\r\n        password: password,\r\n        starting_money: startingMoney,\r\n    });\r\n    const roomID = roomRef.id;\r\n    initSymbols(null,null,NumOfSymbols).then((symbolsL) => {\r\n        initDates(symbolsL,Rounds).then((datesD)=> {\r\n            roomRef.update({\r\n                symbols: symbolsL,\r\n                dates: datesD[\"dates\"],\r\n            });\r\n            initializeQuiz(symbolsL,roomID,datesD[\"period\"],datesD[\"dates\"]);\r\n\r\n        });\r\n    });\r\n    return roomID;\r\n}\r\n\r\nexport const getChartUrl = async (roomID,symbol,endDate) =>{\r\n    var imagesData;\r\n    const roomRef = getRoomRef(roomID);\r\n    await roomRef.collection(symbol).doc('images').get().then((doc) => {\r\n        imagesData = doc.data();\r\n    });\r\n    return imagesData[\"Stockpublic_image_url\"][endDate];\r\n}\r\n\r\nexport const getTechnicalUrl = async (roomID, symbol, endDate) => {\r\n    var imagesData;\r\n    const roomRef = getRoomRef(roomID);\r\n    await roomRef.collection(symbol).doc('images').get().then((doc) => {\r\n        imagesData = doc.data();\r\n    });\r\n    return imagesData[\"Stockpublic_image_url\"][endDate];\r\n}\r\n\r\nfunction randomDate(start, end) {\r\n    var date = new Date(+start + Math.random() * (end - start));\r\n    return date;\r\n}\r\n\r\n// Minimum Period is 1Month\r\nexport const initDates = async (symbols, Rounds) => {\r\n    let Stocks= await db.collection(\"Ticker-Info\").doc(\"Stock\").collection(\"Stocks\")\r\n        .where(\"Symbol\",\"in\",symbols).get()\r\n    let IPOyearMax = 0;\r\n    let today = new Date();\r\n    let year = today.getFullYear();\r\n    Stocks.forEach(function(Stock){\r\n        if (IPOyearMax < Stock.data().IPOyear){\r\n            IPOyearMax = Stock.data().IPOyear;\r\n        }\r\n    });\r\n\r\n    // No more than 7 rounds(Periods are measured in months)\r\n    let min_window_size = 3;\r\n    let yearDiff = year - (IPOyearMax+1);\r\n    let maximum_period = Math.floor(((yearDiff * 12)  - min_window_size) / Rounds);\r\n    let random_period =  Math.floor((Math.random()  * (maximum_period - min_window_size))+min_window_size);\r\n    let startDate = new Date(IPOyearMax+1,1,1);\r\n    let endDate =  new Date(IPOyearMax+1,1+random_period,1);\r\n    let rand_startDate =  randomDate(startDate,endDate);\r\n    let dates = [];\r\n    let curr_date = rand_startDate;\r\n    for(var i = 0; i < Rounds; i++) {\r\n        dates.push(curr_date.toISOString().substring(0, 10));\r\n        curr_date = new Date(curr_date.setMonth(curr_date.getMonth()+random_period));\r\n    }\r\n    const datesD ={\r\n        \"dates\" : dates,\r\n        \"period\": random_period\r\n    }\r\n    return datesD\r\n}\r\n\r\nexport const initSymbols = async(Industry,Sector,NumOfSymbols) =>{\r\n    let symbols = []\r\n    if(Sector !== null && Industry !== null){\r\n\r\n        let formData = new FormData();\r\n        formData.append('Industry',Industry);\r\n        formData.append('Sector',Sector)\r\n        formData.append('NumOfSymbols',NumOfSymbols)\r\n        try{\r\n            let response = await fetch('http://localhost:8080/get-symbols', {\r\n                method: 'POST',\r\n                mode: 'cors',\r\n                body: formData\r\n            })\r\n            let symbolJson = await response.json()\r\n            if (symbolJson.hasOwnProperty(\"Error\")){\r\n                console.log(\"No Symbols for your query\")\r\n                return symbols\r\n            }\r\n            symbols = symbolJson['symbols']\r\n        }\r\n        catch(error){\r\n            console.log(\"Error with Query: \" + error)\r\n        }\r\n\r\n    }\r\n    else if(Industry !== null){\r\n\r\n        let IndustryInfo =  await db.collection(\"Ticker-Info\").doc(\"Industry\").get();\r\n        let numOfIndustries= IndustryInfo.data().Industry[Industry];\r\n        let cutoff = Math.floor((Math.random()  * (numOfIndustries - NumOfSymbols))+NumOfSymbols);\r\n        let Industries = await db.collection(\"Ticker-Info\").doc(\"Stock\").collection(\"Stocks\")\r\n            .where(\"Industry\",\"==\",Industry)\r\n            .where(\"IndustryPos\",\"<=\", cutoff)\r\n            .orderBy(\"IndustryPos\").limit(NumOfSymbols).get()\r\n        Industries.forEach(function(doc){\r\n            symbols.push(doc.data().Symbol)\r\n        })\r\n\r\n    }\r\n    else if(Sector !== null){\r\n\r\n        let SectorInfo =  await db.collection(\"Ticker-Info\").doc(\"Sector\").get();\r\n        let numOfSectors= SectorInfo.data().Sector[Sector];\r\n        let cutoff = Math.floor((Math.random()  * (numOfSectors - NumOfSymbols))+NumOfSymbols);\r\n        let Sectors = await db.collection(\"Ticker-Info\").doc(\"Stock\").collection(\"Stocks\")\r\n            .where(\"Sector\",\"==\",Sector)\r\n            .where(\"SectorPos\",\"<=\", cutoff)\r\n            .orderBy(\"SectorPos\").limit(NumOfSymbols).get()\r\n        Sectors.forEach(function(doc){\r\n            symbols.push(doc.data().Symbol)\r\n        })\r\n\r\n    }\r\n    else{\r\n\r\n        let StockInfo =  await db.collection(\"Ticker-Info\").doc(\"Stock\").get();\r\n        let numOfStocks = StockInfo.data().NumOfStocks - 1;\r\n        let cutoff = Math.floor((Math.random()  * (numOfStocks - NumOfSymbols))+NumOfSymbols);\r\n        let Stocks = await db.collection(\"Ticker-Info\").doc(\"Stock\").collection(\"Stocks\")\r\n            .where(\"RandomPos\",\">=\", cutoff)\r\n            .orderBy(\"RandomPos\").limit(NumOfSymbols).get()\r\n        Stocks.forEach(function(Stock){\r\n            symbols.push(Stock.data().Symbol)\r\n        })\r\n\r\n    }\r\n    return symbols\r\n}\r\n\r\nexport const initializeQuiz = async (symbols, roomId, periodLen, endDates) => {\r\n    var formData = new FormData();\r\n    formData.append('symbol',JSON.stringify(symbols));\r\n    formData.append('RoomId',roomId);\r\n    formData.append('end-date',JSON.stringify(endDates));\r\n    try{\r\n        await fetch('http://localhost:8080/get-prices', {\r\n            method: 'POST',\r\n            mode: 'cors',\r\n            body: formData\r\n        })\r\n    }\r\n    catch(err) {\r\n        console.log(\"Error is \" +  err)\r\n    }\r\n    formData.append('periodLen',periodLen)\r\n    try{\r\n        await fetch('http://localhost:8080/get-stock-image', {\r\n            method: 'POST',\r\n            mode: 'cors',\r\n            body: formData\r\n        })\r\n    }\r\n    catch(error){\r\n        console.log(\"Error is \" +  error)\r\n    }\r\n}\r\n\r\nexport const getSymbols = async (roomID) =>{\r\n    const roomData = await getRoomData(roomID);\r\n    return roomData.symbols;\r\n}\r\n\r\nexport const getDayIndex = async (roomID) => {\r\n    const roomData = await getRoomData(roomID);\r\n    return roomData.day_index;\r\n}\r\n\r\n// returns current price for all symbols being tracked\r\nexport const getPrices = async (roomID, dayIndex) => {\r\n    const roomData = await getRoomData(roomID);\r\n    const symbolNamesArray = roomData.symbols;\r\n\r\n    var prices = [];\r\n\r\n    // save all current prices in an array\r\n    for (var index = 0; index < symbolNamesArray.length; index++) {\r\n        const currentName = symbolNamesArray[index];\r\n        const symbolPricesDoc = await db.collection('Rooms').doc(roomID).collection(currentName).doc('Prices').get();\r\n        const symbolPricesData = symbolPricesDoc.data();\r\n        const currentPrice = symbolPricesData.prices[dayIndex];\r\n        prices.push(currentPrice);\r\n    }\r\n\r\n    return prices;\r\n}\r\n\r\nexport const getUserData = async (roomID, userID) => {\r\n    await updateNetWorth(roomID,userID);\r\n    var userData;\r\n    const userRef = getUserRef(roomID,userID);\r\n    await userRef.get().then((doc) => {\r\n        userData = doc.data();\r\n    });\r\n    return userData;\r\n}\r\n\r\nexport const getUserRef = (roomID, userID) => {\r\n    return db.collection('Rooms').doc(roomID).collection('users').doc(userID);\r\n}\r\n\r\nexport const verifyOk = async (roomID, userID, dayIndex, changeArray, prices) => {\r\n\r\n    var consistentInvestment = true;\r\n    const userRef = getUserRef(roomID, userID);\r\n    const userData = await getUserData(roomID, userID);\r\n\r\n    var curArray = userData.curShares;\r\n    var sum = curArray.map(function(num,idx) {return num + changeArray[idx];});\r\n    consistentInvestment = consistentInvestment && sum.every((e) => e>=0);\r\n\r\n    //check cash ok\r\n    var totalMoney = userData.money_left;\r\n    var moneySpentArr = prices.map(function(price,idx) {totalMoney -= price * changeArray[idx];});\r\n    consistentInvestment = consistentInvestment && totalMoney >= 0;\r\n\r\n    return consistentInvestment;\r\n}\r\n\r\nexport const changeCash = async (roomID, userID, dayIndex, changeArray, prices) => {\r\n    const userRef = getUserRef(roomID, userID);\r\n    const userData = await getUserData(roomID,userID);\r\n    var totalMoney = userData.money_left;\r\n    prices.map(function(num,idx) {totalMoney -= num * changeArray[idx];});\r\n    userRef.update({money_left: totalMoney});\r\n}\r\n\r\nexport const changeShares = async (roomID, userID, dayIndex, changeArray) => {\r\n    const userRef = getUserRef(roomID, userID);\r\n    const investRef = userRef.collection('investments').doc(dayIndex);\r\n    const userData = await getUserData(roomID,userID);\r\n    //update curShares array\r\n    var curArray = userData.curShares;\r\n    var sum = curArray.map(function(num,idx) {return num + changeArray[idx];});\r\n    userRef.update({curShares: sum});\r\n\r\n    //update\r\n    //TODO: current have a separate call for investment. Consider accessing it through userData to save time\r\n    investRef.get().then(function(investDoc) {\r\n        if (investDoc.exists) {\r\n            var investData = investDoc.data();\r\n            var curArray = investData.change;\r\n            var sum = curArray.map(function(num,idx) {\r\n                return num + changeArray[idx];\r\n            });\r\n            investRef.update({\r\n                change: sum,\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nexport const makeInvestment = async (roomID, userID, dayIndex, changeArray) => {\r\n    const prices = await getPrices(roomID, dayIndex);\r\n\r\n    if (!(await verifyOk(roomID,userID,dayIndex,changeArray,prices))) return false;\r\n\r\n    changeCash(roomID,userID,dayIndex,changeArray,prices);\r\n    changeShares(roomID,userID,dayIndex,changeArray);\r\n\r\n    return true;\r\n}\r\n\r\nexport const getShares = async (roomID, userID) => {\r\n    const userData = await getUserData(roomID,userID);\r\n    return userData.currentShares;\r\n}\r\n\r\nexport const getCash = async (roomID, userID) => {\r\n    const userData = await getUserData(roomID,userID);\r\n    return userData.money_left;\r\n}\r\n\r\nexport const getRoomData = async (roomID) => {\r\n    var roomData;\r\n    await db.collection('Rooms').doc(roomID).get().then((doc) => {\r\n        roomData = doc.data();\r\n    });\r\n    return roomData;\r\n}\r\n\r\nexport const getRoomRef = (roomID) => {\r\n    return db.collection('Rooms').doc(roomID);\r\n}\r\n\r\nexport const getNetWorth = async (roomID, userID) => {\r\n    await updateNetWorth(roomID, userID);\r\n    const userData = await getUserData(roomID, userID);\r\n    return userData.net_worth;\r\n}\r\n\r\n//TODO: this method can be called many times, which leads to latency due to a lot of awaits. See if can pass userData from other methods\r\nexport const updateNetWorth = async (roomID, userID) => {\r\n    const dayIndex = await getDayIndex(roomID);\r\n    const prices = await getPrices(roomID, dayIndex);\r\n    const userData = await getUserData(roomID, userID);\r\n    const userRef = getUserRef(roomID, userID);\r\n    const curShares = userData.curShares;\r\n    var netWorth = userData.money_left;\r\n    curShares.map((numShares,idx) => {netWorth += numShares * prices[idx];});\r\n    if (userData.net_worth == netWorth) return;\r\n    await userRef.update({net_worth: netWorth});\r\n}\r\n\r\n// retrieves symbol name given the symbol's index\r\nexport const getSymbolNameFromIndex = async (roomID, symbolIndex) => {\r\n    const roomDoc = await db.collection('Rooms').doc(roomID).get();\r\n    const symbols = roomDoc.data().symbols;\r\n    return symbols[symbolIndex];\r\n}","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {db, fire, auth, firestore} from '../../firebase.js';\r\nimport {setUpRoom} from '../firebase-access.jsx'\r\n\r\nfunction generateGameId() {\r\n    let id = '';\r\n    const possible = '0123456789';\r\n    for (let i=0; i<6; i++) {\r\n        id += possible.charAt(Math.floor(Math.random() * 10));\r\n    }\r\n    return id;\r\n}\r\n\r\nclass Create extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            pagetype: 'not-created',\r\n            gameId: '',\r\n        }\r\n        this.createGameWrapper = this.createGameWrapper.bind(this);\r\n    }\r\n    \r\n    componentDidMount() {\r\n    }\r\n\r\n    // createGameWrapper() {\r\n    //     console.log(\"create game called\");\r\n    //     const that = this;\r\n    //     //create game doc in firestore database\r\n    //     var _gameId = generateGameId();\r\n    //     this.setState({\r\n    //         gameId: _gameId,\r\n    //     });\r\n    //     var gameRef = db.collection(\"Rooms\").doc(_gameId);\r\n    //     gameRef.set({\r\n    //         created: Date.now(),\r\n    //         currentQuestion: 0,\r\n    //         phase: 'created',\r\n    //         gameId: _gameId,\r\n    //     })\r\n    //\r\n    //     //create subcollections for users\r\n    //     var questionsRef = gameRef.collection(\"questions\").doc(\"Test Q\").set({});\r\n    //     var usersRef = gameRef.collection(\"users\").doc(\"Test user\").set({});\r\n    //\r\n    //     //update props\r\n    //     this.setState({\r\n    //         pagetype: 'created',\r\n    //     });\r\n    // }\r\n\r\n    async createGameWrapper() {\r\n        var _gameId = await setUpRoom(2,3,null,'');\r\n        this.setState({\r\n            pagetype: 'created',\r\n            gameId: _gameId,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        console.log('render called');\r\n        const {pagetype,gameId} = this.state;\r\n        console.log(pagetype);\r\n        console.log(gameId);\r\n        return (\r\n\r\n            <div className=\"app-page create-page\">\r\n                {pagetype === 'not-created' &&\r\n                    <button onClick={async () => await this.createGameWrapper()}> Create Game! </button>\r\n                }\r\n\r\n                {pagetype === 'created' && (\r\n                    <div>\r\n                        <span>Created game PIN: </span>\r\n                        {' '}\r\n                        <span className=\"dynamic-text\">{gameId}</span>\r\n                        {' '}\r\n                        <Link to=\"/host\">Copy this ID and use it host the game</Link>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Create;","import React, { Component } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport {Quiz} from '../quiz/host/Quiz.js';\r\nimport {db,fire} from '../../firebase.js';\r\nimport {addUser,getUserData,getUserRef,getRoomData,getRoomRef} from '../firebase-access.jsx';\r\n\r\n/*\r\nPossible phases:\r\n- not-joined : display joining game\r\n- connection : players joining phase\r\n- question : displaying questions phase\r\n- between-question : display a page between questions\r\n- leaderboards : display the winners at the end\r\n- ended : the game has ended\r\n */\r\n\r\n/*\r\nGame structure:\r\n- phase: (see above)\r\n- starting_money: contains starting value for users\r\n- day_index: which date is used\r\n- password: password\r\n- symbols: array of symbols\r\n* User collection\r\n\r\n */\r\n\r\nclass Host extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            phase: 'not-joined',\r\n            questionNum: 0,\r\n            roomId: null,\r\n            password: '',\r\n            authenticated: 'no',\r\n            listening: 'no',\r\n            users: [],\r\n        }\r\n        this.userExists = this.userExists.bind(this);\r\n        this.updateUsers = this.updateUsers.bind(this);\r\n        this.joinGame = this.joinGame.bind(this);\r\n        this.updatePhase = this.updatePhase.bind(this);\r\n        this.initGameListener = this.initGameListener.bind(this);\r\n        this.restartGame = this.restartGame.bind(this);\r\n        this.quitGame = this.quitGame.bind(this);\r\n        this.endGame = this.endGame.bind(this);\r\n        this.debug = this.debug.bind(this);\r\n    }\r\n\r\n    debug(str) {\r\n        console.log(str);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {roomId} = this.state;\r\n    }\r\n\r\n    componentDidChange() {\r\n    }\r\n\r\n    handleChangeSelect = (event) => {\r\n        this.setState({[event.target.name]:event.target.value});\r\n    };\r\n\r\n    handleChange = name => (event) => {\r\n        this.setState({\r\n            [name]:event.target.value,\r\n        });\r\n    }\r\n\r\n    userExists(userId) {\r\n        const {users} = this.state;\r\n        console.log(\"type of users: \" + typeof(users));\r\n        Array.from(users).forEach(function(item) {\r\n            console.log(\"item ID \" + item.userId);\r\n            console.log(\"checked user ID \" + userId);\r\n\r\n            if (item.userId == userId) {\r\n                console.log(\"they are equal\");\r\n                return true;\r\n            } else {\r\n                console.log(item.userId + \" and \" + userId + \" are not equal\");\r\n            }\r\n        });\r\n        return false;\r\n    }\r\n\r\n    updatePhase(gameupdate) {\r\n        const {roomId} = this.state;\r\n        this.setState({\r\n            phase: gameupdate,\r\n        });\r\n        db.collection('Rooms').doc(roomId).update({\r\n            phase: gameupdate,\r\n        });\r\n    }\r\n\r\n    restartGame() {\r\n\r\n    }\r\n\r\n    quitGame() {\r\n        const {toggleHeader} = this.props;\r\n        this.updateGame({phase:null});\r\n    }\r\n\r\n    endGame(){\r\n        this.updateGame({phase:'final_result'});\r\n    }\r\n\r\n    // addDummyUser(nickname) {\r\n    //     const {gameId} = this.state;\r\n    //     const gameRef = db.collection('Rooms').doc(gameId);\r\n    //     const userRef = gameRef.collection('users').doc(nickname);\r\n    //\r\n    //     const gameInfo = {\r\n    //         nickname: nickname,\r\n    //         investments: [],\r\n    //         personal_value: -1,\r\n    //         money_left: -1,\r\n    //         gains: 0,\r\n    //         losses: 0,\r\n    //     }\r\n    //     userRef.set(gameInfo);\r\n    // }\r\n\r\n    updateUsers() {\r\n        const {password,roomId} = this.state;\r\n        const that = this;\r\n        var roomRef = db.collection('Rooms').doc(roomId);\r\n        roomRef.collection('users').get().then((snapshot) => {\r\n            snapshot.docs.forEach(user => {\r\n                var userData = user.data();\r\n                if (!that.userExists(userData.userId)) {\r\n                    console.log(\"adding new user\");\r\n                    console.log(\"user id is \" + userData.userId);\r\n                    that.setState({\r\n                        users: that.state.users.concat([userData]),\r\n                    })\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    async joinGame() {\r\n        const {password,roomId} = this.state;\r\n        const that = this;\r\n        var roomRef = getRoomRef(roomId);\r\n        var roomData = await getRoomData(roomId);\r\n        if (roomData != null) {\r\n            console.log(roomData);\r\n            if (roomData.password === password && roomData.phase === 'no-host') {\r\n                that.setState({\r\n                    authenticated: 'yes',\r\n                    phase: 'connection',\r\n                });\r\n                that.debug(\"ckpoint 1 host\");\r\n                await addUser(roomId,\"dummy user\");\r\n                that.debug(\"ckpoint 2 host\");\r\n                await that.updateUsers();\r\n                that.debug(\"ckpoint 3 host\");\r\n                await that.initGameListener();\r\n                that.debug(\"ckpoint 4 host\");\r\n                roomRef.update({\r\n                    phase: 'connection',\r\n                });\r\n            } else {\r\n                console.log(\"wrong password\");\r\n            }\r\n        } else {\r\n            console.log(\"room \" + roomId + \" does not exist\");\r\n        }\r\n    }\r\n\r\n    initGameListener() {\r\n        const {roomId} = this.state;\r\n        var roomRef = db.collection('Rooms').doc(roomId);\r\n        const that = this;\r\n\r\n        roomRef.collection('users').onSnapshot(function(roomData) {\r\n            that.updateUsers();\r\n        });\r\n    }\r\n\r\n    startGame() {\r\n        const that = this;\r\n        that.updatePhase('question');\r\n    }\r\n\r\n    advanceQuestion() {\r\n        const {roomId} = this.state;\r\n        const that = this;\r\n        this.setState({\r\n            questionNum: that.state.questionNum + 1,\r\n        });\r\n        db.collection('Rooms').doc(roomId).update({\r\n            date_index: that.state.questionNum,\r\n        });\r\n    }\r\n\r\n    /*\r\n    Possible phases:\r\n    - not-joined : display joining game\r\n    - connection : players joining phase\r\n    - question : displaying questions phase\r\n    - between-question : display a page between questions\r\n    - leaderboards : display the winners at the end\r\n    - ended : the game has ended\r\n     */\r\n    render() {\r\n        const {roomId, password, phase, authenticated, users, questionNum} = this.state;\r\n        const gameFunctions = {\r\n            update: this.updateGame,\r\n            restart: this.restartGame,\r\n            end: this.endGame,\r\n            quit: this.quitGame,\r\n        }\r\n\r\n        if (authenticated === 'no') {\r\n            return (\r\n                <div className=\"page-container host-page\">\r\n                    <FormControl>\r\n                        <TextField label=\"Game PIN\" name=\"Game ID\" value={roomId}\r\n                                   onChange={this.handleChange('roomId')}/>\r\n                    </FormControl>\r\n                    <FormControl>\r\n                        <TextField label=\"Password\" type=\"password\" name=\"password\" value={password}\r\n                                   onChange={this.handleChange('password')}/>\r\n                    </FormControl>\r\n                    <Button onClick={() => this.joinGame()} variant=\"contained\">Host</Button>\r\n                </div>\r\n            )\r\n        } else if (authenticated === 'yes') {\r\n            if (phase === 'connection') {\r\n                return (\r\n                    <div className=\"page-container host-page\">\r\n                        <p> Users List </p>\r\n                        <ul id=\"user-list\">\r\n                            {users.map(user => (\r\n                                <li >{user.nickname}</li>\r\n                            ))\r\n                            }\r\n                        </ul>\r\n                        <button onClick={() => this.startGame()}>start stonks game</button>\r\n                    </div>\r\n                )\r\n            } else if (phase === 'question') {\r\n                return (\r\n                    <div className=\"page-container host-page\">\r\n                        <span>Current question: </span>\r\n                        {' '}\r\n                        <span className=\"dynamic-text\">{questionNum}</span>\r\n                        <p> Users List </p>\r\n                        <ul id=\"user-list\">\r\n                            {users.map(user => (\r\n                                <li key={user.id}>{user.nickname}</li>\r\n                            ))\r\n                            }\r\n                        </ul>\r\n                        <button onClick={() => this.advanceQuestion()}>next question</button>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n        // return (\r\n        //     <div className=\"page-container host-page\">\r\n        //         {game.gametype === 'quiz' && <Quiz game={game} gameFunc={gameFunctions}/>}\r\n        //     </div>\r\n        // );\r\n    }\r\n}\r\n\r\nexport default Host;","import React, { Component } from 'react';\r\n\r\nclass Quiz extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"host-container\">\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport {Quiz};","import React, {Component,Fragment} from 'react';\r\nimport {db,fire} from '../../firebase.js';\r\nimport {Quiz} from '../quiz/play/Quiz.jsx';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport {addUser,getChartUrl,getTechnicalUrl,getSymbols,getDayIndex,getPrices,getUserData,getUserRef,makeInvestment,\r\ngetCash,getShares,getRoomData,getRoomRef,getNetWorth} from '../firebase-access.jsx';\r\nimport {Helmet} from 'react-helmet';\r\nimport {isRedirect} from \"@reach/router\";\r\n\r\nclass Play extends Component {\r\n\r\n    /*\r\n    Possible phases:\r\n    - not-joined : display joining game\r\n    - connection : players joining phase\r\n    - question : displaying questions phase\r\n    - between-question : display a page between questions\r\n    - leaderboards : display the winners at the end\r\n    - ended : the game has ended\r\n     */\r\n\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            //static properties\r\n            gameId: null,\r\n            password: '',\r\n            userId: '',\r\n            nickname: '',\r\n\r\n            //frequently updated properties\r\n            phase: 'not-joined',\r\n            questionNum: 0,\r\n            chartURLs: [],\r\n            technicalIndicatorUrls: [],\r\n            net_worth: 0,\r\n            cash: [],\r\n            curShares: [],\r\n            prices: [],\r\n        };\r\n        this.addUser = this.addUser.bind(this);\r\n        this.joinGame = this.joinGame.bind(this);\r\n        this.initGameListener = this.initGameListener.bind(this);\r\n        this.debug = this.debug.bind(this);\r\n    }\r\n\r\n    debug(str) {\r\n        console.log(str);\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    handleChangeSelect = (event) => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    handleChange = name => (event) => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n\r\n    ////frequently updated properties\r\n    //             phase: 'not-joined',\r\n    //             questionNum: 0,\r\n    //             chartURLs: [],\r\n    //             technicalIndicatorUrls: [],\r\n    //             netWorth: 0,\r\n    //             cash: [],\r\n    //             curShares: [],\r\n    //             prices: [],\r\n\r\n    initGameListener() {\r\n        const that = this;\r\n        const {questionNum,gameId,phase,nickname} = this.state;\r\n        const gameRef = db.collection('Rooms').doc(gameId);\r\n        gameRef.onSnapshot(function(gameDoc) {\r\n            const gameData = gameDoc.data();\r\n            const curQuestionNum = gameData.day_index;\r\n            const curPhase = gameData.phase;\r\n            console.log(gameData);\r\n            if (questionNum != curQuestionNum) {\r\n                that.setState({\r\n                    questionNum: curQuestionNum + 1,\r\n                });\r\n                //TODO: fetch question data\r\n            }\r\n            if (phase !== curPhase) {\r\n                that.setState({\r\n                    phase: curPhase,\r\n                });\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    joinGame() {\r\n        const {gameId,password,nickname} = this.state;\r\n        const that = this;\r\n        const gameRef = db.collection('Rooms').doc(gameId);\r\n        gameRef.get().then(function(gameData) {\r\n            if (gameData.exists) {\r\n                var gameInfo = gameData.data();\r\n                if (gameInfo.password === password && gameInfo.phase === 'connection') {\r\n                    var uniqueUserId = that.addUser(nickname,gameInfo.starting_money);\r\n                    that.setState({\r\n                        phase: 'connection',\r\n                        userId: uniqueUserId,\r\n                        net_worth: gameInfo.starting_money,\r\n                        cash: gameInfo.starting_money,\r\n                    });\r\n                    that.initGameListener();\r\n\r\n                } else if (gameInfo.password === password) {\r\n                    console.log(\"game not being hosted yet\");\r\n                } else if (gameInfo.phase === 'connection') {\r\n                    console.log(\"incorrect password\");\r\n                } else {\r\n                    console.log(\"game does not exist\");\r\n                }\r\n            } else {\r\n                console.log(\"room \" + gameId + \" does not exist\");\r\n            }\r\n        });\r\n    }\r\n\r\n    render () {\r\n        const {game,phase,password,nickname,playerKey,questionNum,gameId,recentGameId,recentGame,isRedirected,gametype} = this.state;\r\n        console.log(questionNum);\r\n        if (phase === 'not-joined') {\r\n            return (\r\n                <div className=\"page-container play-page\">\r\n                    <div>\r\n                        <FormControl>\r\n                            <TextField label=\"Nickname\" name=\"nickname\" value={nickname}\r\n                                       onChange={this.handleChange('nickname')}/>\r\n                        </FormControl>\r\n                        <FormControl>\r\n                            <TextField label=\"Game PIN\" name=\"Game ID\" value={gameId} onChange={this.handleChange('gameId')}/>\r\n                        </FormControl>\r\n                        <FormControl>\r\n                            <TextField label=\"Password\" type=\"password\" name=\"password\" value={password}\r\n                                       onChange={this.handleChange('password')}/>\r\n                        </FormControl>\r\n                        <Button onClick={() => this.joinGame()} variant=\"contained\">Join</Button>\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else if (phase === 'connection') {\r\n            return (\r\n                <div>\r\n                    <p> Connected. Please wait for host to start game. </p>\r\n                </div>\r\n            )\r\n        } else if (phase === 'question') {\r\n            return (\r\n                <div>\r\n                    <span>Current question: </span>\r\n                    {' '}\r\n                    <span className=\"dynamic-text\">{questionNum}</span>\r\n                    <p> (question info will be displayed here) </p>\r\n                    <button> Buy </button>\r\n                    <button> Sell </button>\r\n                    <button> Hold </button>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default Play;","import React, { Component } from 'react';\r\nimport {fire} from '../../../firebase.js';\r\n\r\n\r\nclass Quiz extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n        this.saveAnswer = this.saveAnswer.bind(this);\r\n    }\r\n\r\n    saveAnswer(answer) {\r\n        let that = this;\r\n        let currentQuestionId = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id;\r\n        fire.database().ref('/Rooms/' + that.props.game.key + '/players/' + this.props.playerKey + '/answers/' + currentQuestionId).set(answer, function(error) {\r\n            var x = 1+1;\r\n        }\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div></div>\r\n        );\r\n    }\r\n};\r\n\r\nexport {Quiz};\r\n\r\n\r\n/* Code for Round.jsx is below\r\nimport React, {Component,Fragment} from 'react';\r\nimport {Helmet} from 'react-helmet';\r\n\r\nimport {firestore} from '../../firebase';\r\nimport {getUserID} from '../../firebase';\r\n\r\nimport {getChartUrl, getTechnicalUrl,getSymbols} from '../firestore-access';\r\nimport {getCurrentPrice} from '../firestore-access';\r\nimport {advanceDay} from '../firestore-access';\r\nimport {getDate} from '../firestore-access';\r\nimport {DATES} from '../firestore-access';\r\nimport {getUserShares} from '../firestore-access';\r\nimport {makeInvestment} from '../firestore-access';\r\nimport {getUserBalance} from '../firestore-access';\r\n\r\nclass Round extends React.Component {\r\n\r\n    constructor (props) {\r\n        super(props)\r\n        this.state = {\r\n            chartURL: null,\r\n            technicalIndicators: null,\r\n            roomID: this.props.location.state.roomID,\r\n            currentCash: null,\r\n            currentShares: null,\r\n            currentPrice: null,\r\n            userChoice: null,\r\n            userNumShares: null,\r\n            currSymbol: null,\r\n            //leaderboard: null,\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        console.log(\"RoomID is \" + this.state.roomID)\r\n\r\n        const userID = getUserID();\r\n        const end  = getDate(firestore,this.state.roomID);\r\n        const symbols = await getSymbols(firestore,this.state.roomID)\r\n        let symbol = symbols[0]\r\n        this.setState({\r\n            currSymbol: symbol,\r\n            technicalIndicators: await getTechnicalUrl(firestore,this.state.roomID,symbol,end) ,\r\n            chartURL: await getChartUrl(firestore,this.state.roomID,symbol,end),\r\n            currentCash: await getUserBalance(firestore, this.state.roomID, userID),\r\n            currentShares: await getUserShares(firestore, this.state.roomID, userID),\r\n            currentPrice: await getCurrentPrice(firestore, symbol,this.state.roomID),\r\n            userNumShares: (await getUserShares(firestore, this.state.roomID, userID)).length\r\n        });\r\n    }\r\n\r\n    buy = () => {\r\n      this.setState({userChoice: 'buy'});\r\n    }\r\n\r\n    hold = () => {\r\n      this.setState({userChoice: 'hold'});\r\n    }\r\n\r\n    sell = () => {\r\n      this.setState({userChoice: 'sell'});\r\n    }\r\n\r\n    submitHandler = (event) => {\r\n      event.preventDefault(); // prevent page\r\n      // make the investment\r\n      makeInvestment(firestore, this.state.roomID, getUserID(), this.state.currSymbol, 100, 3);\r\n    if(advanceDay(firestore,this.state.roomID))\r\n    {\r\n        alert(\"recorded the investment\");\r\n    }\r\n    else\r\n    {\r\n        alert(\"Game is finished.\")\r\n    }\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div>\r\n                <p className=\"price\">The current price per share is ${this.state.currentPrice}</p>\r\n                <p className=\"usr-current-shares\">You current hold {this.state.userNumShares} shares</p>\r\n                <p className=\"usr-available-money\">You have ${this.state.currentCash} left to spend.</p>\r\n\r\n                <form onSubmit={this.submitHandler}>\r\n                    <button onClick={this.buy}>Buy</button>\r\n\r\n                    <label>Enter number of shares:</label>\r\n                    <input\r\n                        name=\"num-shares\"\r\n                        type=\"number\"\r\n                    />\r\n\r\n                    <button onClick={this.sell}>Sell</button>\r\n                    <button onClick={this.hold}>Hold</button>\r\n\r\n                    <input\r\n                        type=\"submit\"\r\n                    />\r\n                </form>\r\n\r\n\r\n                <div id=\"confirmation\"></div>\r\n            </div>\r\n        )\r\n    }\r\n    }\r\n\r\n    export default Round;\r\n*/","import React, { Component, createContext } from \"react\";\r\nimport { auth } from \"../../../firebase\";\r\n\r\nexport const UserContext = createContext({ user: null });\r\nclass UserProvider extends Component {\r\n  state = {\r\n    user: null\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    auth.onAuthStateChanged(userAuth => {\r\n      this.setState({user: userAuth});\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <UserContext.Provider value={this.state.user}>\r\n        {this.props.children}\r\n      </UserContext.Provider>\r\n    );\r\n  }\r\n}\r\nexport default UserProvider;","import React, {Component,Fragment} from 'react';\r\nimport {Helmet} from 'react-helmet';\r\nimport {Link, withRouter} from 'react-router-dom';\r\n\r\nimport UserProvider from \"../authenticate/providers/UserProvider\";\r\nimport { UserContext } from \"../authenticate/providers/UserProvider\";\r\n\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\n\r\nclass Home extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={};\r\n    }\r\n    render() {\r\n        return (\r\n            <Fragment>\r\n                <Helmet><title> toohak stonks quizzes </title></Helmet>\r\n                <div id=\"home\">\r\n                    <section>\r\n                        <div></div>\r\n                        <h1>toohak app</h1>\r\n                        <div className=\"play-button-container\">\r\n                            <ul>\r\n                                <li><Link to=\"/play\">Play</Link></li>\r\n                            </ul>\r\n                        </div>\r\n                        <div className=\"host-button-container\">\r\n                            <p><Link to=\"/host\">Host a room</Link></p>\r\n                        </div>\r\n                        <div className=\"create-button-container\">\r\n                            <p><Link to=\"/create\">Create a room</Link></p>\r\n                        </div>\r\n                        <div className=\"auth-container\">\r\n                            <Link to=\"/auth/signIn\">Login</Link>\r\n                            <Link to=\"/auth/signUp\">Signup</Link>\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;","import React, {Fragment, Component} from 'react';\r\nimport {Helmet} from 'react-helmet';\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\r\nimport Create from './Components/pages/Create'\r\nimport Host from './Components/pages/Host'\r\nimport Play from './Components/pages/Play'\r\nimport Home from './Components/pages/Home'\r\n\r\nimport UserProvider from './Components/authenticate/providers/UserProvider.jsx';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={};\r\n  }\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div className=\"App\">\r\n          <div id=\"content\">\r\n            <Route exact path=\"/play\" render={() => <Play />} />\r\n            <Route exact path=\"/host\" render={() => <Host />} />\r\n            <Route exact path=\"/create\" render={() => <Create />} />\r\n            <Route exact path=\"/\" render={() => <Home />} />\r\n          </div>\r\n        </div>\r\n      </Router>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}