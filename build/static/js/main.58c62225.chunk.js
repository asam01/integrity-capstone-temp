(this.webpackJsonptoohak=this.webpackJsonptoohak||[]).push([[0],{71:function(e,t,n){e.exports=n(88)},88:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),s=n(16),u=n(17),i=n(19),l=n(18),p=n(45),m=n(24),d=n(12),h=n(4),f=n.n(h),b=n(8),v=n(15),y=n(29),g=n.n(y),k=(n(59),n(60),g.a.initializeApp({apiKey:"AIzaSyArVyBRB-XMiStAmjP5mCV2v2PmScbEpi8",authDomain:"integrity-step-capstone.firebaseapp.com",databaseURL:"https://integrity-step-capstone.firebaseio.com",projectId:"integrity-step-capstone",storageBucket:"integrity-step-capstone.appspot.com",messagingSenderId:"359578935158",appId:"1:359578935158:web:89d46122b0609b4a95a457",measurementId:"G-GMNRGZQ858"}),g.a.auth()),x=(g.a.firestore(),g.a.firestore()),w=(new g.a.auth.GoogleAuthProvider,function(e){console.log(e)}),E=function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,e.abrupt("return",n.dates.length);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,e.abrupt("return",n.starting_money);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a,r,o,c,s,u,i,l,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w("checkpoint 1 firebase-access"),e.next=3,E(t);case 3:return a=e.sent,w("checkpoint 2 firebase-access"),e.next=7,C(t);case 7:return r=e.sent.length,w("checkpoint 3 firebase-access"),e.next=11,T(t);case 11:return o=e.sent,w("checkpoint 4 firebase-access"),e.next=15,o.collection("users").doc();case 15:return c=e.sent,w("checkpoint 5 firebase-access"),s=c.id,u=Array.from(Array(r),(function(){return 0})),w("checkpoint 6 firebase-access"),e.next=22,j(t);case 22:i=e.sent,l={userId:s,nickname:n,net_worth:i,money_left:i,curShares:u},w("checkpoint 7 firebase-access"),c.set(l),p=0;case 27:if(!(p<a)){e.next=33;break}return e.next=30,c.collection("investments").doc(toString(p)).set({change:u});case 30:p++,e.next=27;break;case 33:return w("checkpoint 8 firebase-access"),e.abrupt("return",s);case 35:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4,o=x.collection("Rooms").doc();o.set({day_index:0,phase:"no-host",password:a,starting_money:r});var c=o.id;return G(null,null,e).then((function(e){_(e,t).then((function(t){o.update({symbols:e,dates:t.dates}),N(e,c,t.period,t.dates)}))})),c},I=function(){var e=Object(b.a)(f.a.mark((function e(t,n,a){var r,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=F(t,a),e.next=3,x.collection("Rooms").doc(t).collection(n).doc("images").get();case 3:return o=e.sent,c=o.data(),e.abrupt("return",[c.Stockpublic_image_url[r],c.ADXpublic_image_url[r],c.MACDpublic_image_url[r],c.RSIpublic_image_url[r]]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();var _=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a,r,o,c,s,u,i,l,p,m,d,h,b,v;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("Ticker-Info").doc("Stock").collection("Stocks").where("Symbol","in",t).get();case 2:for(a=e.sent,r=0,o=new Date,c=o.getFullYear(),a.forEach((function(e){r<e.data().IPOyear&&(r=e.data().IPOyear)})),3,s=c-(r+1),u=Math.floor((12*s-3)/n),i=Math.floor(Math.random()*(u-3)+3),l=new Date(r+1,1,1),p=new Date(r+1,1+i,1),f=l,y=p,m=new Date(+f+Math.random()*(y-f)),d=[],h=m,b=0;b<n;b++)d.push(h.toISOString().substring(0,10)),h=new Date(h.setMonth(h.getMonth()+i));return v={dates:d,period:i},e.abrupt("return",v);case 19:case"end":return e.stop()}var f,y}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(f.a.mark((function e(t,n,a){var r,o,c,s,u,i,l,p,m,d,h,b,v;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null===n||null===t){e.next=24;break}return(o=new FormData).append("Industry",t),o.append("Sector",n),o.append("NumOfSymbols",a),e.prev=6,e.next=9,fetch("http://localhost:8080/get-symbols",{method:"POST",mode:"cors",body:o});case 9:return c=e.sent,e.next=12,c.json();case 12:if(!(s=e.sent).hasOwnProperty("Error")){e.next=16;break}return console.log("No Symbols for your query"),e.abrupt("return",r);case 16:r=s.symbols,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),console.log("Error with Query: "+e.t0);case 22:e.next=57;break;case 24:if(null===t){e.next=36;break}return e.next=27,x.collection("Ticker-Info").doc("Industry").get();case 27:return u=e.sent,i=u.data().Industry[t],l=Math.floor(Math.random()*(i-a)+a),e.next=32,x.collection("Ticker-Info").doc("Stock").collection("Stocks").where("Industry","==",t).where("IndustryPos","<=",l).orderBy("IndustryPos").limit(a).get();case 32:e.sent.forEach((function(e){r.push(e.data().Symbol)})),e.next=57;break;case 36:if(null===n){e.next=48;break}return e.next=39,x.collection("Ticker-Info").doc("Sector").get();case 39:return p=e.sent,m=p.data().Sector[n],d=Math.floor(Math.random()*(m-a)+a),e.next=44,x.collection("Ticker-Info").doc("Stock").collection("Stocks").where("Sector","==",n).where("SectorPos","<=",d).orderBy("SectorPos").limit(a).get();case 44:e.sent.forEach((function(e){r.push(e.data().Symbol)})),e.next=57;break;case 48:return e.next=50,x.collection("Ticker-Info").doc("Stock").get();case 50:return h=e.sent,b=h.data().NumOfStocks-1,v=Math.floor(Math.random()*(b-a)+a),e.next=55,x.collection("Ticker-Info").doc("Stock").collection("Stocks").where("RandomPos",">=",v).orderBy("RandomPos").limit(a).get();case 55:e.sent.forEach((function(e){r.push(e.data().Symbol)}));case 57:return e.abrupt("return",r);case 58:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(f.a.mark((function e(t,n,a,r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("symbol",JSON.stringify(t)),o.append("RoomId",n),o.append("end-date",JSON.stringify(r)),e.prev=4,e.next=7,fetch("http://localhost:8080/get-prices",{method:"POST",mode:"cors",body:o});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log("Error is "+e.t0);case 12:return o.append("periodLen",a),e.prev=13,e.next=16,fetch("http://localhost:8080/get-stock-image",{method:"POST",mode:"cors",body:o});case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log("Error is "+e.t1);case 21:case"end":return e.stop()}}),e,null,[[4,9],[13,18]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,e.abrupt("return",n.symbols);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,e.abrupt("return",n.day_index);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a,r,o,c,s,u,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:a=e.sent,r=a.symbols,o=[],c=0;case 6:if(!(c<r.length)){e.next=17;break}return s=r[c],e.next=10,x.collection("Rooms").doc(t).collection(s).doc("Prices").get();case 10:u=e.sent,i=u.data(),l=i.prices[n],o.push(l);case 14:c++,e.next=6;break;case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,n);case 2:return r=R(t,n),e.next=5,r.get().then((function(e){a=e.data()}));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(e,t){return x.collection("Rooms").doc(e).collection("users").doc(t)},M=function(){var e=Object(b.a)(f.a.mark((function e(t,n,a,r,o){var c,s,u,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!0,R(t,n),e.next=4,D(t,n);case 4:return s=e.sent,u=s.curShares,i=u.map((function(e,t){return e+r[t]})),c=c&&i.every((function(e){return e>=0})),l=s.money_left,o.map((function(e,t){l-=e*r[t]})),c=c&&l>=0,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(f.a.mark((function e(t,n,a,r,o){var c,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=R(t,n),e.next=3,D(t,n);case 3:s=e.sent,u=s.money_left,o.map((function(e,t){u-=e*r[t]})),c.update({money_left:u});case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(f.a.mark((function e(t,n,a,r){var o,c,s,u,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=R(t,n),c=o.collection("investments").doc(a),e.next=4,D(t,n);case 4:s=e.sent,u=s.curShares,i=u.map((function(e,t){return e+r[t]})),o.update({curShares:i}),c.get().then((function(e){if(e.exists){var t=e.data().change.map((function(e,t){return e+r[t]}));c.update({change:t})}}));case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(f.a.mark((function e(t,n,a,r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,a);case 2:return o=e.sent,e.next=5,M(t,n,a,r,o);case 5:if(e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return U(t,n,a,r,o),A(t,n,a,r),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("Rooms").doc(t).get().then((function(e){n=e.data()}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){return x.collection("Rooms").doc(e)},W=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a,r,o,c,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return a=e.sent,e.next=5,q(t,a);case 5:return r=e.sent,e.next=8,D(t,n);case 8:if(o=e.sent,c=R(t,n),s=o.curShares,u=o.money_left,s.map((function(e,t){u+=e*r[t]})),o.net_worth!=u){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,c.update({net_worth:u});case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return a=e.sent,e.abrupt("return",a.dates[n]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var J=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={pagetype:"not-created",gameId:""},a.createGameWrapper=a.createGameWrapper.bind(Object(v.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"createGameWrapper",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(2,3,null,"");case 2:t=e.sent,this.setState({pagetype:"created",gameId:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log("render called");var t=this.state,n=t.pagetype,a=t.gameId;return console.log(n),console.log(a),r.a.createElement("div",{className:"app-page create-page"},"not-created"===n&&r.a.createElement("button",{onClick:Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createGameWrapper();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}," Create Game! "),"created"===n&&r.a.createElement("div",null,r.a.createElement("span",null,"Created game PIN: ")," ",r.a.createElement("span",{className:"dynamic-text"},a)," ",r.a.createElement(m.b,{to:"/host"},"Copy this ID and use it host the game")))}}]),n}(a.Component),z=n(36),Q=n(118),H=n(119),K=n(120),V=(a.Component,function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChangeSelect=function(e){a.setState(Object(z.a)({},e.target.name,e.target.value))},a.handleChange=function(e){return function(t){a.setState(Object(z.a)({},e,t.target.value))}},a.state={phase:"not-joined",questionNum:0,roomId:null,password:"",authenticated:"no",listening:"no",users:[]},a.userExists=a.userExists.bind(Object(v.a)(a)),a.updateUsers=a.updateUsers.bind(Object(v.a)(a)),a.joinGame=a.joinGame.bind(Object(v.a)(a)),a.updatePhase=a.updatePhase.bind(Object(v.a)(a)),a.initGameListener=a.initGameListener.bind(Object(v.a)(a)),a.restartGame=a.restartGame.bind(Object(v.a)(a)),a.quitGame=a.quitGame.bind(Object(v.a)(a)),a.endGame=a.endGame.bind(Object(v.a)(a)),a.debug=a.debug.bind(Object(v.a)(a)),a}return Object(u.a)(n,[{key:"debug",value:function(e){console.log(e)}},{key:"componentDidMount",value:function(){this.state.roomId}},{key:"componentDidChange",value:function(){}},{key:"userExists",value:function(e){var t=this.state.users,n=!1;return console.log("type of users: "+typeof t),Array.from(t).forEach((function(t){console.log("item ID "+t.userId),console.log("checked user ID "+e),t.userId==e?(console.log("they are equal"),n=!0):console.log(t.userId+" and "+e+" are not equal")})),n}},{key:"updatePhase",value:function(e){var t=this.state.roomId;this.setState({phase:e}),x.collection("Rooms").doc(t).update({phase:e})}},{key:"restartGame",value:function(){}},{key:"quitGame",value:function(){this.props.toggleHeader;this.updateGame({phase:null})}},{key:"endGame",value:function(){this.updateGame({phase:"final_result"})}},{key:"updateUsers",value:function(){var e=this.state,t=(e.password,e.roomId),n=this;x.collection("Rooms").doc(t).collection("users").get().then((function(e){e.docs.forEach((function(e){var t=e.data(),a=n.userExists(t.userId);console.log("userExistsBool value is "+a),0==a&&(console.log("adding new user"),console.log("user id is "+t.userId),n.setState({users:n.state.users.concat([t])}))}))}))}},{key:"joinGame",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,a,r,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.password,a=t.roomId,r=this,o=T(a),e.next=5,B(a);case 5:if(null==(c=e.sent)){e.next=26;break}if(console.log(c),c.password!==n||"no-host"!==c.phase){e.next=23;break}return r.setState({authenticated:"yes",phase:"connection"}),r.debug("ckpoint 1 host"),e.next=13,O(a,"dummy user");case 13:return r.debug("ckpoint 2 host"),e.next=16,r.updateUsers();case 16:return r.debug("ckpoint 3 host"),e.next=19,r.initGameListener();case 19:r.debug("ckpoint 4 host"),o.update({phase:"connection"}),e.next=24;break;case 23:console.log("wrong password");case 24:e.next=27;break;case 26:console.log("room "+a+" does not exist");case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initGameListener",value:function(){var e=this.state.roomId,t=x.collection("Rooms").doc(e),n=this;t.collection("users").onSnapshot((function(e){n.updateUsers()}))}},{key:"startGame",value:function(){this.updatePhase("question")}},{key:"advanceQuestion",value:function(){var e=this.state.roomId;this.setState({questionNum:this.state.questionNum+1}),x.collection("Rooms").doc(e).update({date_index:this.state.questionNum})}},{key:"render",value:function(){var e=this,t=this.state,n=t.roomId,a=t.password,o=t.phase,c=t.authenticated,s=t.users,u=t.questionNum;this.updateGame,this.restartGame,this.endGame,this.quitGame;if("no"===c)return r.a.createElement("div",{className:"page-container host-page"},r.a.createElement(K.a,null,r.a.createElement(Q.a,{label:"Game PIN",name:"Game ID",value:n,onChange:this.handleChange("roomId")})),r.a.createElement(K.a,null,r.a.createElement(Q.a,{label:"Password",type:"password",name:"password",value:a,onChange:this.handleChange("password")})),r.a.createElement(H.a,{onClick:function(){return e.joinGame()},variant:"contained"},"Host"));if("yes"===c){if("connection"===o)return r.a.createElement("div",{className:"page-container host-page"},r.a.createElement("p",null," Users List "),r.a.createElement("ul",{id:"user-list"},s.map((function(e){return r.a.createElement("li",null,e.nickname)}))),r.a.createElement("button",{onClick:function(){return e.startGame()}},"start stonks game"));if("question"===o)return r.a.createElement("div",{className:"page-container host-page"},r.a.createElement("span",null,"Current question: ")," ",r.a.createElement("span",{className:"dynamic-text"},u),r.a.createElement("p",null," Users List "),r.a.createElement("ul",{id:"user-list"},s.map((function(e){return r.a.createElement("li",{key:e.id},e.nickname)}))),r.a.createElement("button",{onClick:function(){return e.advanceQuestion()}},"next question"))}}}]),n}(a.Component)),X=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={roomId:null,password:"",userId:"",nickname:"",numSymbols:0,questionNum:0,chartUrls:null,net_worth:0,money_left:0,curShares:[],prices:[],curBuyArray:null},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.numSymbols;var e=new Array(this.props.numSymbols).fill(0);this.setState({numSymbols:this.props.numSymbols,roomId:this.props.roomId,userId:this.props.userId,nickname:this.props.nickname,questionNum:this.props.questionNum,chartUrls:this.props.chartUrls,net_worth:this.props.net_worth,money_left:this.props.money_left,curShares:this.props.curShares,prices:this.props.prices,curBuyArray:e})}},{key:"buy",value:function(){var e=this.state,t=e.roomId,n=e.userId,a=e.questionNum,r=new Array(this.props.numSymbols).fill(0);r[0]=1,L(t,n,a,r)}},{key:"sell",value:function(){var e=this.state,t=e.roomId,n=e.userId,a=e.questionNum,r=new Array(this.props.numSymbols).fill(0);r[0]=-1,L(t,n,a,r)}},{key:"render",value:function(){var e=this,t=this.state,n=t.questionNum,a=t.chartUrls,o=t.net_worth,c=t.money_left,s=t.curShares,u=t.prices,i=(t.curBuyArray,t.nickname),l=t.roomId,p=a[0];return r.a.createElement("div",null,r.a.createElement("p",null,"room id: ",l),r.a.createElement("p",null,"nickname: ",i),r.a.createElement("p",null,"question number: ",n),r.a.createElement("p",null,"chart:"),r.a.createElement("img",{src:p[0]}),r.a.createElement("p",null,"net worth: ",o),r.a.createElement("p",null,"cash: ",c),r.a.createElement("p",null,"current shares of symbol: ",s[0]),r.a.createElement("p",null,"price of symbol: ",u[0]),r.a.createElement("button",{onclick:function(){return e.buy()}},"buy"),r.a.createElement("button",{onclick:function(){return e.sell()}},"sell"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{questionNum:e.questionNum,chartUrls:e.chartUrls,net_worth:e.net_worth,money_left:e.money_left,curShares:e.curShares,prices:e.prices}}}]),n}(a.Component),Y=(n(89),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChangeSelect=function(e){a.setState(Object(z.a)({},e.target.name,e.target.value))},a.handleChange=function(e){return function(t){a.setState(Object(z.a)({},e,t.target.value))}},a.state={roomId:null,password:"",userId:"",nickname:"",numSymbols:0,phase:"not-joined",questionNum:0,chartURLs:null,net_worth:0,money_left:[],curShares:[],prices:[]},a.updatePortfolio=a.updatePortfolio.bind(Object(v.a)(a)),a.joinGame=a.joinGame.bind(Object(v.a)(a)),a.initGameListener=a.initGameListener.bind(Object(v.a)(a)),a.debug=a.debug.bind(Object(v.a)(a)),a}return Object(u.a)(n,[{key:"debug",value:function(e){console.log(e)}},{key:"componentDidMount",value:function(){}},{key:"updatePortfolio",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,a,r,o,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.roomId,a=t.userId,e.next=3,B(n);case 3:return r=e.sent,e.next=6,D(n,a);case 6:return o=e.sent,e.next=9,I(n,r.day_index);case 9:return c=e.sent,e.next=12,q(n,r.day_index);case 12:s=e.sent,this.setState({questionNum:r.day_index,chartUrls:c,prices:s,net_worth:o.net_worth,money_left:o.money_left,curShares:o.curShares});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeInvestmentWrapper",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var n,a,r,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.next=3,n.updatePortfolio();case 3:return a=this.state,r=a.roomId,o=a.userId,c=a.questionNum,e.next=6,L(r,o,c,t);case 6:e.sent?n.debug("make investment sucessful"):n.debug("make investment failed");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initGameListener",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,a,r,o,c,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,n=this.state,a=n.questionNum,r=n.roomId,o=n.phase,n.nickname,c=n.userId,s=x.collection("Rooms").doc(r),u=s.collection("users").doc(c),s.onSnapshot(function(){var e=Object(b.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.data(),console.log(r),a==r.day_index&&o==r.phase||t.updatePortfolio();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u.onSnapshot((function(e){t.updatePortfolio()}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinGame",value:function(){var e=this.state,t=e.roomId,n=e.password,a=e.nickname,r=this;x.collection("Rooms").doc(t).get().then((function(e){if(e.exists){var o=e.data();if(o.password===n&&"connection"===o.phase){var c=r.addUser(a,o.starting_money);r.setState({phase:"connection",userId:c,numSymbols:o.symbols.length,net_worth:o.starting_money,money_left:o.starting_money}),r.initGameListener(),r.updatePortfolio()}else o.password===n?console.log("room not being hosted yet"):"connection"===o.phase?console.log("incorrect password"):console.log("room does not exist")}else console.log("room "+t+" does not exist")}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.phase,a=t.password,o=t.nickname,c=(t.playerKey,t.questionNum),s=t.roomId;t.isRedirected;return console.log(c),"not-joined"===n?r.a.createElement("div",{className:"page-container play-page"},r.a.createElement("div",null,r.a.createElement(K.a,null,r.a.createElement(Q.a,{label:"Nickname",name:"nickname",value:o,onChange:this.handleChange("nickname")})),r.a.createElement(K.a,null,r.a.createElement(Q.a,{label:"Game PIN",name:"Game ID",value:s,onChange:this.handleChange("roomId")})),r.a.createElement(K.a,null,r.a.createElement(Q.a,{label:"Password",type:"password",name:"password",value:a,onChange:this.handleChange("password")})),r.a.createElement(H.a,{onClick:function(){return e.joinGame()},variant:"contained"},"Join"))):"connection"===n?r.a.createElement("div",null,r.a.createElement("p",null," Connected. Please wait for host to start game. ")):"question"===n?r.a.createElement("div",null,r.a.createElement(X,this.state)):void 0}}]),n}(a.Component)),Z=Object(a.createContext)({user:null}),$=(a.Component,function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null," toohak stonks quizzes ")),r.a.createElement("div",{id:"home"},r.a.createElement("section",null,r.a.createElement("div",null),r.a.createElement("h1",null,"toohak app"),r.a.createElement("div",{className:"play-button-container"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.b,{to:"/play"},"Play")))),r.a.createElement("div",{className:"host-button-container"},r.a.createElement("p",null,r.a.createElement(m.b,{to:"/host"},"Host a room"))),r.a.createElement("div",{className:"create-button-container"},r.a.createElement("p",null,r.a.createElement(m.b,{to:"/create"},"Create a room"))),r.a.createElement("div",{className:"auth-container"},r.a.createElement(m.b,{to:"/auth/signIn"},"Login"),r.a.createElement(m.b,{to:"/auth/signUp"},"Signup")))))}}]),n}(a.Component)),ee=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"content"},r.a.createElement(d.a,{exact:!0,path:"/play",render:function(){return r.a.createElement(Y,null)}}),r.a.createElement(d.a,{exact:!0,path:"/host",render:function(){return r.a.createElement(V,null)}}),r.a.createElement(d.a,{exact:!0,path:"/create",render:function(){return r.a.createElement(J,null)}}),r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement($,null)}}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.58c62225.chunk.js.map